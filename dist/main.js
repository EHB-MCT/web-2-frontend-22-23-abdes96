(()=>{"use strict";class e{constructor(e,t,s,n,i){this._title=e,this._genres=t,this._image=s,this._runtime=n,this._summary=i}get htmlString(){return`<div class="event">\n    <img src="${this._image}" />\n    <h1>${this._title}</h1>\n    <p class="genre">${this._genres}</p>\n    <p class="runtime">${this._runtime} min</p>\n    <button>  <a href="">  add to to-see list</a></button>\n\n  </div>`}}({showlist:[],filteredEventList:[],searchTerm:"",setup(){window.onload=()=>{this.fetchEvents(),document.getElementById("searchForm").addEventListener("keyup",(()=>{let e=document.getElementById("searchInput").value;this.applyFilter(e.toLowerCase())})),document.getElementById("genre").addEventListener("click",(()=>{let e=document.getElementById("genre").value;this.genreFilter(e)}))}},fetchEvents(){fetch("https://api.tvmaze.com/shows").then((e=>e.json())).then((t=>{t.forEach((t=>{const s=t.name,n=t.genres,i=t.image.medium,r=t.runtime,h=t.summary;let l="";l=new e(s,n,i,r,h),this.showlist.push(l),this.filteredEventList=this.showlist})),this.render(),this.InfoPage()}))},render(){let e=document.getElementById("eventContainer");e.innerHTML="";let t="";this.showlist.forEach((e=>{t+=e.htmlString})),e.innerHTML=t},applyFilter(e){this.searchTerm=e;const t=this.filteredEventList.filter((t=>{if(t._title.toLowerCase().includes(e))return!0}));this.showlist=t,this.render(),this.InfoPage()},genreFilter(e){const t=this.filteredEventList.filter((t=>{if(t._genres.includes(e))return!0}));this.showlist=t,this.render()},InfoPage(){const e=document.getElementsByClassName("event");[].slice.call(e).forEach((e=>{e.addEventListener("click",(function(t){setTimeout(500),t.preventDefault();let s=e.nextSibling.id;window.location.href=`./showinfo.html?id=${s}`}))}))}}).setup()})();