window.onload=function(){async function e(){try{let e=document.getElementById("shows");e.innerHTML="";let l=sessionStorage.getItem("user"),i=JSON.parse(l).uuid,d=await n(`http://web2project.onrender.com/show/listshows/${i}`,"GET");if(o(),!d.shows){let t=document.createElement("p");return e.style.margin="100px",t.textContent="(The shows you have added to your list are empty. Add shows to remember what you have to watch.)",e.appendChild(t),void s()}d.shows.reverse();for(let t=0;t<d.shows.length;t++){let o=d.shows[t],s=`\n          <div class="showsect">\n            <div class="show">\n              <img class="img" src="${d.shows[t].showImg}" alt="">\n              <div><h1 id="name">${d.shows[t].showName}</h1></div>\n\n              <p class="showt"><b class="showssid" id="${o.showId}"><button class="delete-btn">Delete</button></b></p>\n            </div>\n          </div>\n        `;e.insertAdjacentHTML("beforeend",s)}s();let c=document.querySelectorAll(".delete-btn");for(let e=0;e<c.length;e++)c[e].addEventListener("click",(function(){let e=this.closest(".showssid").id;t(i,e)}));document.querySelectorAll(".img").forEach((e=>{e.addEventListener("click",(function(){let e=this.closest(".show").querySelector(".showssid").id;window.location.href=`./showinfo.html?id=${e}`}))}))}catch(e){console.log(e)}}async function t(t,l){try{o();let i=await n(`http://web2project.onrender.com/show/${t}`,"DELETE",{showId:l});if(s(),i.message){let t=i.message,o=document.createElement("h2");o.innerText=t,o.id="message-popup",o.style.color="rgb(126, 40, 40)",o.style.backgroundColor="black",document.body.appendChild(o),o.style.display="block",setTimeout((()=>{o.remove()}),3e3),e()}else alert(`Error: ${i.error}`)}catch(e){console.log(e)}}function o(){let e=document.createElement("div");e.className="loading-container",e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.width="100%",e.style.height="100%",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.backdropFilter="blur(10px)",document.body.appendChild(e);let t=document.createElement("h2");t.textContent="Loading...",e.appendChild(t)}function s(){let e=document.querySelector(".loading-container");e&&e.remove()}async function n(e,t,o){let s=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return await s.json()}e()};