(()=>{async function e(e,t,n){let s=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await s.json()}window.onload=function(){!function(){let t=sessionStorage.getItem("user"),n=JSON.parse(t),s=n.email,a=n.firstname,i=n.password,o=n.lastname,d=n.uuid,l="";l+=` <h2 class="profildata" id=" textprofil">First name : ${a} </h2>\n    <h3 class="firstname" id="firstname"></h3>\n    <h2 class="profildata">Last Name : ${o} </h2>\n   \n  \n    <h2>Email :  ${s} </h2>\n    <div class="changeEmail">\n   <button id="changeEmail"><h3> Change mail <i class="material-icons updateacc" >create</i></h3></button>\n    </div>\n    <div class="emailInput" style="display: none;" id="emailInput">\n    <input type="text"  id="emailInputForm" name="email" placeholder="New email">\n    <button type="submit"  id="submitNewEmail">Change email</button>\n\n    </div>\n    <h2>Password : <h2 type ="password"> </h2></h2>\n    <div class="Passwordchange">\n    <button id="updatepassword"><h3><a>Change password <i class="material-icons updatepassword" >create</i></a></h3></button>\n    </div>\n    <div class="passwordInput" style="display: none;" id="passwordInput">\n    <form class="passwordChangeForm" id="passwordChangeForm">\n    <input type="text"  id="Newpassword" name="password" placeholder="New password">\n\n    <button type="submit" class="submitpassword" id="submitpassword">Change password</button>\n\n    </form>\n    </div>\n    `,document.getElementById("profiledata").insertAdjacentHTML("afterbegin",l),function(t,n,s,a){document.getElementById("submitNewEmail").addEventListener("click",(i=>{i.preventDefault();const o={email:document.getElementById("emailInputForm").value,firstname:t,lastname:n,password:s,uuid:a};e("https://web2project.onrender.com/user/ID","PUT",o).then((e=>{sessionStorage.setItem("user",JSON.stringify(o)),"Successfully update!"==e.succes?(alert(JSON.stringify(e.succes)),location.reload()):alert(JSON.stringify(e))}))}))}(a,o,i,d),function(t,n,s,a){document.getElementById("submitpassword").addEventListener("click",(i=>{i.preventDefault();let o=document.getElementById("Newpassword").value;console.log(o);const d={email:t,firstname:n,lastname:s,password:o,uuid:a};e("https://web2project.onrender.com/user/ID","PUT",d).then((e=>{sessionStorage.setItem("user",JSON.stringify(d)),"Successfully update!"==e.succes?(alert(JSON.stringify(e.succes)),location.reload()):alert(JSON.stringify(e))}))}))}(s,a,o,d)}(),document.getElementById("deleteprofile").addEventListener("click",(()=>{document.getElementById("confirm").style.display="block",function(){let t=sessionStorage.getItem("user"),n=JSON.parse(t);document.getElementById("confirm").addEventListener("click",(()=>{e("https://web2project.onrender.com/user/ID","DELETE",n).then((e=>{alert(e.message),sessionStorage.clear(),window.location.href="./loginpage.html"}))}))}()})),document.getElementById("changeEmail").addEventListener("click",(()=>{document.getElementById("emailInput").style.display="block"})),document.getElementById("updatepassword").addEventListener("click",(()=>{document.getElementById("passwordInput").style.display="block"})),document.getElementById("Logout").addEventListener("click",(()=>{sessionStorage.clear(),window.location.href="../docs/index.html"}))}})();