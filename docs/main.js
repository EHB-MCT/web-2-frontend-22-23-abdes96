(()=>{"use strict";class e{constructor(e,t,s,i,n,r){this._title=e,this._genres=t,this._image=s,this._runtime=i,this._summary=n,this._id=r}get htmlString(){return`<div class="show" >\n    <div class="event" id="${this._id}">\n    <a> <img src="${this._image}" /></a> \n    </div>\n    <h1>${this._title}</h1>\n    <p class="genre">${this._genres}</p>\n    <p class="runtime">${this._runtime} min</p>\n    <button>  <span>  add to to-see list</span></button>\n</div>\n  `}}({showlist:[],filteredEventList:[],searchTerm:"",setup(){window.onload=()=>{this.fetchEvents(),document.getElementById("searchForm").addEventListener("keyup",(()=>{let e=document.getElementById("searchInput").value;this.applyFilter(e.toLowerCase())})),document.getElementById("genre").addEventListener("click",(()=>{let e=document.getElementById("genre").value;this.genreFilter(e)}))}},fetchEvents(){fetch("https://api.tvmaze.com/shows").then((e=>e.json())).then((t=>{t.forEach((t=>{const s=t.name,i=t.genres,n=t.image.medium,r=t.runtime,h=t.summary,l=t.id;let o="";o=new e(s,i,n,r,h,l),this.showlist.push(o),this.filteredEventList=this.showlist})),this.render(),this.InfoPage()}))},render(){let e=document.getElementById("eventContainer");e.innerHTML="";let t="";this.showlist.forEach((e=>{t+=e.htmlString})),e.innerHTML=t},applyFilter(e){this.searchTerm=e;const t=this.filteredEventList.filter((t=>{if(t._title.toLowerCase().includes(e))return!0}));this.showlist=t,this.render(),this.InfoPage()},genreFilter(e){const t=this.filteredEventList.filter((t=>{if(t._genres.includes(e))return!0}));this.showlist=t,this.render(),this.InfoPage()},InfoPage(){const e=document.getElementsByClassName("event");[].slice.call(e).forEach((e=>{e.addEventListener("click",(function(t){setTimeout(500),t.preventDefault();let s=e.id;console.log(s),window.location.href=`./showinfo.html?id=${s}`}))}))}}).setup()})();